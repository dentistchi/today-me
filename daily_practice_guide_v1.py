"""
매일매일 실천 가이드 시스템 (4주 × 7일 = 28일)
====================================================
각 날짜별 구체적 실천 + 배경 심리학 + 예상 저항 + 돌파 전략
"""

from typing import Dict, List
from datetime import datetime, timedelta

class DailyPracticeGuide:
    """28일 매일 실천 가이드 생성기"""
    
    def __init__(self, user_name: str, analysis_results: Dict):
        self.name = user_name
        self.results = analysis_results
        self.dominant_patterns = self._get_top_patterns()
        
    def _get_top_patterns(self) -> List[str]:
        """상위 3개 패턴 추출"""
        patterns = self.results.get('detected_patterns', [])
        return [p['type'] for p in patterns[:3]]
    
    def generate_all_days(self) -> List[Dict]:
        """28일 전체 가이드 생성"""
        all_days = []
        
        # Week 1: 자기자비 기초 (Day 1-7)
        all_days.extend(self._week1_days())
        
        # Week 2: 완벽주의 내려놓기 (Day 8-14)
        all_days.extend(self._week2_days())
        
        # Week 3: 공통 인간성 (Day 15-21)
        all_days.extend(self._week3_days())
        
        # Week 4: 안정적 자기가치 (Day 22-28)
        all_days.extend(self._week4_days())
        
        return all_days
    
    # ========================================
    # WEEK 1: 자기자비 기초 (Day 1-7)
    # ========================================
    
    def _week1_days(self) -> List[Dict]:
        """Week 1 상세 가이드"""
        
        return [
            # Day 1
            {
                "day": 1,
                "week": 1,
                "title": "🔍 자기비판 알아차리기 시작",
                "morning_ritual": "오늘 하루 동안 나는 나 자신에게 어떻게 말하는지 관찰할 것입니다.",
                "core_practice": {
                    "name": "자기비판 일기",
                    "duration": "5분",
                    "steps": [
                        "1. 종이와 펜을 준비합니다",
                        "2. 오늘 자신에게 했던 부정적인 말을 적습니다",
                        "   예: '또 실수했네', '멍청해', '왜 이것도 못해?'",
                        "3. 각 문장을 읽으며 느낌을 관찰합니다",
                        "4. '친구가 이렇게 말했다면?'을 상상합니다"
                    ],
                    "why_it_works": "자기비판을 의식하는 첫 단계. 무의식적 패턴을 의식으로 끌어올립니다.",
                    "psychology_background": """
**배경 심리학: 메타인지 (Metacognition)**

Flavell (1979)의 메타인지 이론:
- 생각을 관찰하는 능력은 변화의 전제조건입니다
- "나는 나를 비판하고 있다"를 아는 순간, 그것과 거리를 둘 수 있습니다

신경과학적 근거:
- 전전두엽(Prefrontal Cortex)이 활성화됩니다
- 편도체(Amygdala)의 자동 반응에서 벗어납니다
- Siegel (2010): "Name it to tame it" (이름 붙이기가 감정을 조절합니다)

연구 증거:
- Kross et al. (2014, JPSP): 자기 거리두기는 정서 조절을 향상시킵니다
- 참가자가 "나는 왜 이렇게 느끼는가?" 대신 "[이름]은 왜 이렇게 느끼는가?"로 
  3인칭 관점을 사용했을 때, 스트레스가 감소했습니다
                    """
                },
                "expected_resistance": "이상하게 느껴질 수 있습니다. '내가 나를 관찰한다니?'라는 생각이 듭니다.",
                "breakthrough_strategy": "5분만 시도하세요. 완벽하게 할 필요 없습니다. 단 한 문장만 적어도 성공입니다.",
                "evening_reflection": "오늘 나는 내 생각을 관찰하는 첫 걸음을 내디뎠습니다.",
                "micro_win": "자기비판을 1개 이상 알아차렸다면 → 오늘의 목표 달성! ✅"
            },
            
            # Day 2
            {
                "day": 2,
                "week": 1,
                "title": "📝 패턴 발견하기",
                "morning_ritual": "어제 적은 자기비판 목록을 다시 읽으며 시작합니다.",
                "core_practice": {
                    "name": "자기비판 패턴 분석",
                    "duration": "10분",
                    "steps": [
                        "1. 어제 적은 목록을 펼칩니다",
                        "2. 반복되는 단어나 주제를 찾습니다",
                        "   예: '멍청하다' 3번, '실패' 2번, '못한다' 4번",
                        "3. 이 단어들을 동그라미로 표시합니다",
                        "4. 패턴에 이름을 붙입니다",
                        "   예: '완벽주의 비판', '능력 의심', '타인 비교'"
                    ],
                    "why_it_works": "패턴을 발견하면 '이것은 나의 전부가 아니라 하나의 습관'임을 깨닫습니다.",
                    "psychology_background": """
**배경 심리학: 인지적 탈융합 (Cognitive Defusion)**

Hayes et al. (2006) - Acceptance and Commitment Therapy (ACT):
- "나는 멍청하다" → "나는 '나는 멍청하다'는 생각을 하고 있다"
- 생각과 나 사이의 거리를 만듭니다
- 생각은 사실이 아니라 마음의 이벤트입니다

연구 증거:
- Masuda et al. (2004): 인지적 탈융합 기법은 부정적 자기평가의 
  행동적 영향을 감소시켰습니다
- 참가자들은 "나는 나쁘다"라는 단어를 30초간 빠르게 반복한 후,
  단어가 의미를 잃고 단순한 소리로 변했습니다 (의미 포화 효과)

실제 적용:
- 자기비판을 "비판 생각"이라고 부르기
- "완벽주의 프로그램이 실행 중"이라고 인식하기
                    """
                },
                "expected_resistance": "패턴이 너무 많아서 압도될 수 있습니다.",
                "breakthrough_strategy": "단 1개 패턴만 찾으세요. '능력 의심'이든 '타인 비교'든 하나면 충분합니다.",
                "evening_reflection": "나의 자기비판은 나의 본질이 아니라 학습된 패턴입니다.",
                "micro_win": "반복되는 패턴을 1개 발견했다면 → 성공! ✅"
            },
            
            # Day 3
            {
                "day": 3,
                "week": 1,
                "title": "🗣️ 친구에게 말하듯 연습",
                "morning_ritual": "나는 오늘 나에게 친구처럼 말할 것입니다.",
                "core_practice": {
                    "name": "자기대화 전환",
                    "duration": "실시간 (하루 종일)",
                    "steps": [
                        "1. 자기비판이 감지되면 잠시 멈춥니다",
                        "2. 심호흡을 3번 합니다",
                        "3. 같은 상황을 친구에게 어떻게 말할지 생각합니다",
                        "4. 그 문장을 소리 내어 자신에게 말합니다",
                        "",
                        "예시:",
                        "❌ '또 실수했어, 멍청해' (자기비판)",
                        "→ 🤔 '친구라면 뭐라고 말할까?'",
                        "→ ✅ '실수는 배우는 과정이야. 다음엔 더 잘할 수 있어' (자기자비)"
                    ],
                    "why_it_works": "타인에게는 자비롭지만 자신에게는 가혹한 이중 잣대를 깨뜨립니다.",
                    "psychology_background": """
**배경 심리학: 자기자비 (Self-Compassion)**

Kristin Neff (2003)의 자기자비 3요소:
1. **자기친절 (Self-Kindness)**: 자기비판 대신 자기이해
2. **공통 인간성 (Common Humanity)**: 고립감 대신 연결감
3. **마음챙김 (Mindfulness)**: 과잉동일시 대신 균형잡힌 인식

신경과학:
- 자기자비는 옥시토신(애착 호르몬) 분비를 증가시킵니다
- 위협 시스템(Threat system) → 돌봄 시스템(Soothing system) 전환
- Gilbert (2009): Compassion Focused Therapy

연구 증거:
- Neff & Germer (2013): 8주 자기자비 훈련 후
  * 우울 31% 감소
  * 불안 29% 감소
  * 자기자비 43% 증가
  * 삶의 만족도 30% 증가

- Breines & Chen (2012): 자기자비를 연습한 참가자는
  실패 후 더 많이 노력했습니다 (동기부여 향상)
  * "자기자비는 나약함이 아니라 회복탄력성의 원천"
                    """
                },
                "expected_resistance": "어색하고 진심처럼 느껴지지 않을 수 있습니다.",
                "breakthrough_strategy": "진심이 아니어도 괜찮습니다. 배우가 대사를 연습하듯 기계적으로 해보세요. 뇌는 반복으로 배웁니다.",
                "evening_reflection": "오늘 나는 나에게 얼마나 친절했나요? (0-10점)",
                "micro_win": "친구처럼 말하기를 1번이라도 시도했다면 → 성공! ✅"
            },
            
            # Day 4
            {
                "day": 4,
                "week": 1,
                "title": "💪 자기자비 문구 만들기",
                "morning_ritual": "나만의 자기자비 문구를 만들 것입니다.",
                "core_practice": {
                    "name": "개인 맞춤 자기자비 문구 작성",
                    "duration": "15분",
                    "steps": [
                        "1. 종이에 이 질문들을 씁니다:",
                        "   • 가장 힘들 때 듣고 싶은 말은?",
                        "   • 친한 친구가 같은 상황이라면 뭐라고 할까?",
                        "   • 나를 아끼는 사람이라면 뭐라고 말할까?",
                        "",
                        "2. 답을 바탕으로 3개 문구를 만듭니다:",
                        "",
                        "템플릿:",
                        "   A) '이것은 힘든 순간이다. (상황 인정)'",
                        "   B) '많은 사람들이 이런 어려움을 겪는다. (보편성)'",
                        "   C) '나는 나에게 친절할 수 있다. (자기친절)'",
                        "",
                        "예시 (완벽주의 패턴 맞춤):",
                        "   A) '완벽하지 않아도 괜찮다.'",
                        "   B) '실수는 인간의 일부다.'",
                        "   C) '나는 충분히 잘하고 있다.'",
                        "",
                        "3. 스마트폰 메모장에 저장합니다"
                    ],
                    "why_it_works": "반복 가능한 문구는 위기 상황에서 즉시 사용할 수 있는 도구가 됩니다.",
                    "psychology_background": """
**배경 심리학: 자기지시 대화 (Self-Instructional Training)**

Meichenbaum (1977) - 인지행동치료의 핵심 기법:
- 내적 대화를 바꾸면 행동과 감정이 바뀝니다
- "나는 할 수 없어" → "나는 한 번에 하나씩 할 수 있어"

신경가소성 (Neuroplasticity):
- 반복된 생각은 신경회로를 강화합니다
- Hebb's Law: "함께 발화하는 뉴런은 함께 연결됩니다"
- 21일 반복 → 새로운 신경 경로 형성 (Lally et al., 2010)

맨트라 효과 (Mantra Effect):
- 짧고 반복 가능한 문구는 스트레스 상황에서 즉시 접근 가능
- 전전두엽이 편도체를 조절하는 속도를 높입니다

연구 증거:
- Hatzigeorgiadis et al. (2011): 자기대화 훈련은 운동 수행과 학습을 향상
- Tod et al. (2011): 동기부여 자기대화는 근력과 지구력을 증가
                    """
                },
                "expected_resistance": "문구가 진부하거나 효과 없을 것 같다는 의심.",
                "breakthrough_strategy": "첫 문구는 완벽하지 않아도 됩니다. 일단 만들고 3일 써본 후 수정하세요.",
                "evening_reflection": "내가 만든 문구를 3번 소리 내어 읽기.",
                "micro_win": "나만의 문구 3개를 만들었다면 → 성공! ✅"
            },
            
            # Day 5
            {
                "day": 5,
                "week": 1,
                "title": "🌅 아침 루틴 설치",
                "morning_ritual": "일어나자마자 자기자비 문구를 3번 읽습니다.",
                "core_practice": {
                    "name": "아침 자기자비 루틴",
                    "duration": "3분",
                    "steps": [
                        "1. 알람을 끄고 침대에 앉습니다",
                        "2. 스마트폰에서 어제 만든 문구를 엽니다",
                        "3. 각 문구를 천천히 3번씩 읽습니다",
                        "   (총 9번: 문구 3개 × 3번 반복)",
                        "4. 마지막 문구를 읽으며 가슴에 손을 얹습니다",
                        "5. '오늘 하루도 나는 충분하다'라고 말합니다"
                    ],
                    "why_it_works": "아침 첫 생각이 하루의 기준선을 설정합니다. 긍정적 시작이 하루 전체에 영향을 줍니다.",
                    "psychology_background": """
**배경 심리학: 프라이밍 효과 (Priming Effect)**

Bargh & Chartrand (1999):
- 초기 자극이 이후 판단과 행동에 무의식적 영향
- 아침 첫 생각이 하루의 "심리적 기준선" 설정

일주기 리듬과 코르티솔:
- 아침 기상 후 30분: 코르티솔(스트레스 호르몬) 최고조
- Cortisol Awakening Response (CAR)
- 이 시간에 자기자비를 연습하면 스트레스 반응을 조절할 수 있습니다

습관 형성 (Habit Formation):
- Clear (2018), Atomic Habits: "습관 쌓기" (Habit Stacking)
- 기존 습관(알람 끄기) + 새 습관(자기자비 읽기)
- 실행 의도 (Implementation Intention): "X 상황에서 Y를 하겠다"

연구 증거:
- Fredrickson et al. (2008): 긍정 감정은 회복탄력성을 구축합니다
  "Broaden and Build Theory" - 긍정 감정이 인지적 유연성을 확장
                    """
                },
                "expected_resistance": "아침에 시간이 없거나 잊어버릴 수 있습니다.",
                "breakthrough_strategy": "알람 이름을 '자기자비 3분'으로 바꾸세요. 침대 옆에 메모를 붙여두세요.",
                "evening_reflection": "오늘 아침 루틴을 했나요? 기분이 어땠나요?",
                "micro_win": "아침에 문구를 1번이라도 읽었다면 → 성공! ✅"
            },
            
            # Day 6
            {
                "day": 6,
                "week": 1,
                "title": "🌙 저녁 루틴 설치",
                "morning_ritual": "아침 루틴 실행 (어제 방법 반복).",
                "core_practice": {
                    "name": "저녁 자기자비 루틴",
                    "duration": "5분",
                    "steps": [
                        "1. 잠들기 30분 전 타이머를 설정합니다",
                        "2. 오늘 힘들었던 순간 1개를 떠올립니다",
                        "3. 그 순간에 자신에게 했던 말을 적습니다",
                        "4. 친구에게 했을 말로 다시 씁니다",
                        "5. 자기자비 문구 3개를 천천히 읽습니다",
                        "6. '오늘도 최선을 다했다'라고 말하며 눕습니다"
                    ],
                    "why_it_works": "잠들기 전 생각이 무의식에 각인됩니다. 자기비판으로 잠들지 말고 자기자비로 하루를 마무리하세요.",
                    "psychology_background": """
**배경 심리학: 수면 전 기억 공고화 (Memory Consolidation)**

Walker (2017) - "Why We Sleep":
- 잠들기 전 생각과 감정이 수면 중 강화됩니다
- REM 수면은 감정 기억을 처리하고 재구성합니다
- 부정적 자기대화로 잠들면 → 부정 기억 강화
- 긍정적 자기대화로 잠들면 → 회복탄력성 강화

신경과학:
- 해마(Hippocampus)가 깨어있는 동안의 경험을 정리합니다
- 수면 중 "재생(Replay)" 현상: 하루 경험이 반복 재생됩니다
- 마지막 생각이 재생 우선순위를 결정합니다

연구 증거:
- Cunningham et al. (2016): 수면 전 긍정 자기 확언은
  다음 날 스트레스 대처 능력을 향상시켰습니다
- Diekelmann & Born (2010): 수면은 감정 조절과 기억을 재구성합니다
                    """
                },
                "expected_resistance": "피곤해서 건너뛰고 싶을 수 있습니다.",
                "breakthrough_strategy": "5분이 부담스러우면 1분만 하세요. 문구 3개만 읽고 잠들어도 됩니다.",
                "evening_reflection": "오늘 하루를 자비롭게 마무리했습니다.",
                "micro_win": "저녁 루틴을 실행했다면 → 성공! ✅"
            },
            
            # Day 7
            {
                "day": 7,
                "week": 1,
                "title": "📊 Week 1 복습 & 축하",
                "morning_ritual": "나는 이번 주를 완료했습니다. 그것만으로도 대단합니다.",
                "core_practice": {
                    "name": "주간 돌아보기",
                    "duration": "15분",
                    "steps": [
                        "1. 이번 주 일기를 다시 읽습니다 (Day 1-6)",
                        "2. 아래 질문에 답합니다:",
                        "   • 가장 힘들었던 날은? 왜?",
                        "   • 가장 효과적이었던 실천은?",
                        "   • 가장 큰 변화는? (아주 작아도 괜찮습니다)",
                        "   • Week 2에서 계속할 것은?",
                        "   • Week 2에서 바꿀 것은?",
                        "",
                        "3. '나는 이번 주 [    ]을 해냈다' 빈칸 채우기",
                        "   예: '나는 이번 주 자기비판을 15번 알아차렸다'",
                        "",
                        "4. 자신에게 축하 메시지 쓰기 (최소 3문장)"
                    ],
                    "why_it_works": "메타인지적 복습은 학습을 강화합니다. 무엇이 효과적인지 알아야 다음 주에 개선할 수 있습니다.",
                    "psychology_background": """
**배경 심리학: 성찰적 실천 (Reflective Practice)**

Schön (1983) - "Reflection-in-action":
- 실천 → 성찰 → 개선의 순환
- "무엇을 했는가"보다 "왜 효과가 있었는가"가 중요

성장 마인드셋 (Growth Mindset):
- Dweck (2006): 과정 찬양 > 결과 찬양
- "잘했어"보다 "열심히 노력했구나"가 더 효과적
- 작은 진전을 축하하는 것이 동기를 유지시킵니다

자기효능감 (Self-Efficacy):
- Bandura (1997): 작은 성공 경험이 누적되면 자신감 상승
- Mastery Experience > Vicarious Experience
- "나는 이걸 해냈다"는 증거가 다음 도전의 동력

연구 증거:
- Grant et al. (2002): 성찰적 실천은 업무 성과를 23% 향상
- Di Stefano et al. (2014): 15분 성찰이 10일간 학습을 23% 증가
- 학습 + 성찰 > 학습만 반복
                    """
                },
                "expected_resistance": "너무 작은 변화라 축하할 가치가 없다고 느낄 수 있습니다.",
                "breakthrough_strategy": "변화의 크기는 중요하지 않습니다. '시작했다'는 사실 자체가 승리입니다.",
                "evening_reflection": "Week 1을 완료한 나 자신에게 박수를 보냅니다. 👏",
                "micro_win": "이 페이지를 읽고 있다는 것 = Week 1 완주! 🎉",
                "celebration": "🎊 Week 1 완료! 당신은 자기자비의 기초를 세웠습니다. 이제 Week 2로 갑니다."
            }
        ]
    
    # ========================================
    # WEEK 2: 완벽주의 내려놓기 (Day 8-14)
    # ========================================
    
    def _week2_days(self) -> List[Dict]:
        """Week 2 상세 가이드"""
        
        return [
            # Day 8
            {
                "day": 8,
                "week": 2,
                "title": "🎯 80% 원칙 이해하기",
                "morning_ritual": "완벽하지 않아도 충분하다.",
                "core_practice": {
                    "name": "80% vs 100% 비교 실험",
                    "duration": "10분 (이론) + 실시간 적용",
                    "steps": [
                        "1. 종이를 둘로 나눕니다 (왼쪽: 100% / 오른쪽: 80%)",
                        "",
                        "2. 왼쪽(100%)에 적기:",
                        "   • 완벽하게 하려면 시간이 얼마나 걸리나?",
                        "   • 스트레스 수준은? (0-10)",
                        "   • 시작을 미루게 되나?",
                        "   • 결과: 완성 여부?",
                        "",
                        "3. 오른쪽(80%)에 적기:",
                        "   • 80%만 하려면 시간이 얼마나 걸리나?",
                        "   • 스트레스 수준은? (0-10)",
                        "   • 시작이 쉬운가?",
                        "   • 결과: 완성 가능성?",
                        "",
                        "4. 오늘 할 작은 작업 1개를 선택합니다",
                        "   예: 이메일 쓰기, 청소, 요리",
                        "",
                        "5. 의도적으로 80%만 하고 멈춥니다",
                        "   • 이메일: 맞춤법 검사 생략",
                        "   • 청소: 눈에 보이는 곳만",
                        "   • 요리: 간단한 버전"
                    ],
                    "why_it_works": "완벽주의의 핵심 문제는 '시작 회피'입니다. 80% 목표는 심리적 부담을 낮춰 실행을 촉진합니다.",
                    "psychology_background": """
**배경 심리학: 파레토 원칙 (Pareto Principle)**

80/20 법칙:
- 20%의 노력이 80%의 결과를 만듭니다
- 마지막 20% 완벽함을 위해 80% 시간을 쓰는 것은 비효율적

완벽주의의 역설 (Perfectionism Paradox):
- Flett et al. (1998): 완벽주의는 생산성을 저하시킵니다
- 완벽을 추구 → 시작 회피 → 마감 압박 → 품질 저하
- 80% 수용 → 즉시 시작 → 여유 있는 완성 → 더 나은 결과

신경과학:
- 완벽주의는 전두엽의 "과도한 계획"을 유발합니다
- 80% 원칙은 "충분히 좋음(Good Enough)"을 학습시킵니다
- Winnicott (1953): "Good Enough Mother" 이론

연구 증거:
- Sirois & Molnar (2016): 완벽주의는 지연행동(Procrastination)과 
  강한 상관관계 (r=0.23, p<0.001)
- Ferrari & Tice (2000): 완벽주의자는 "준비"에 시간을 쓰고 실행을 미룹니다
                    """
                },
                "expected_resistance": "80%는 낮은 기준처럼 느껴지고, 타인이 실망할 것 같습니다.",
                "breakthrough_strategy": "1주일만 실험하세요. 80%를 제출한 후 타인의 반응을 관찰하세요. 대부분 차이를 모릅니다.",
                "evening_reflection": "오늘 80%만 했을 때 결과는 어땠나요? 누가 불만을 표했나요?",
                "micro_win": "80% 완성하고 제출/멈춤을 실행했다면 → 성공! ✅"
            },
            
            # Day 9
            {
                "day": 9,
                "week": 2,
                "title": "⏱️ 시간 제한 실험",
                "morning_ritual": "오늘은 타이머가 나의 친구입니다.",
                "core_practice": {
                    "name": "포모도로 80% 기법",
                    "duration": "25분 × 2회",
                    "steps": [
                        "1. 오늘 할 작업을 선택합니다",
                        "2. 타이머를 25분으로 설정합니다",
                        "3. 시작 전 이렇게 말합니다:",
                        "   '25분 안에 80%만 완성하는 것이 목표다'",
                        "",
                        "4. 작업 시작 → 25분 후 무조건 멈춥니다",
                        "   (완성도가 60%여도 OK, 90%여도 멈춤)",
                        "",
                        "5. 5분 휴식",
                        "",
                        "6. 2회차 시작:",
                        "   • 1회차 결과물을 간단히 다듬기만 (완벽하게 X)",
                        "   • 25분 후 무조건 제출/완료 처리",
                        "",
                        "7. 완성도를 스스로 평가합니다 (0-100%)",
                        "8. '이 정도면 충분하다'라고 말합니다"
                    ],
                    "why_it_works": "시간 제한은 완벽주의의 '끝없는 다듬기'를 차단합니다. 제약이 창의성을 높입니다.",
                    "psychology_background": """
**배경 심리학: 파킨슨의 법칙 (Parkinson's Law)**

Parkinson (1955):
- "일은 그것을 완성하기 위해 주어진 시간만큼 늘어난다"
- 3시간이 있으면 3시간을 채우고, 1시간이면 1시간 안에 끝납니다

시간 제약과 창의성:
- Amabile et al. (2002): 적당한 시간 압박은 창의성을 향상
- 너무 여유로움 → 과도한 다듬기 → 효율 저하
- 적당한 압박 → 핵심 집중 → 효율 증가

주의력과 뇌:
- 25분은 전두엽이 집중을 유지할 수 있는 최적 시간
- Cirillo (1980s): 포모도로 기법 - 25분 작업 + 5분 휴식
- 휴식 없이 계속하면 주의력 감소 → 품질 저하

연구 증거:
- Conti et al. (1996): 시간 제약 하에서 내적 동기가 높아지면
  창의성이 최고조에 달합니다
- Baer & Oldham (2006): "Time pressure paradox" - 적절한 압박은 몰입을 유도
                    """
                },
                "expected_resistance": "25분으로는 부족하다고 느낄 수 있습니다.",
                "breakthrough_strategy": "목표는 '완성'이 아니라 '충분함'입니다. 50분(25×2)으로 80%를 만드는 것이 목표입니다.",
                "evening_reflection": "타이머를 사용했을 때 스트레스가 줄었나요? 늘었나요?",
                "micro_win": "타이머를 설정하고 시작했다면 → 성공! ✅"
            },
            
            # Day 10
            {
                "day": 10,
                "week": 2,
                "title": "🎨 '못생긴 초안' 연습",
                "morning_ritual": "오늘 나는 완벽하지 않은 것을 만들 것입니다.",
                "core_practice": {
                    "name": "Shitty First Draft 기법",
                    "duration": "30분",
                    "steps": [
                        "1. 작성해야 할 문서나 이메일을 선택합니다",
                        "2. 타이머 15분 설정",
                        "3. 규칙:",
                        "   • 수정 금지",
                        "   • 지우개 사용 금지",
                        "   • 띄어쓰기/맞춤법 무시",
                        "   • 생각나는 대로 빠르게 작성",
                        "",
                        "4. 15분 후 멈추기",
                        "5. 10분 휴식 (화면에서 눈 돌리기)",
                        "6. 타이머 15분 재설정",
                        "7. 이제 간단히 다듬기:",
                        "   • 문장 순서 조정",
                        "   • 명확하지 않은 부분만 수정",
                        "   • 80% 목표 (완벽 X)",
                        "",
                        "8. 15분 후 바로 제출/저장"
                    ],
                    "why_it_works": "완벽주의자는 '처음부터 완벽하게'를 추구합니다. '못생긴 초안'은 이 압박을 제거합니다.",
                    "psychology_background": """
**배경 심리학: 창작 과정의 2단계**

Anne Lamott (1994) - "Bird by Bird":
- "Shitty First Draft" (형편없는 초안) 개념
- 1단계: 창조 모드 (비판 금지, 자유로운 생성)
- 2단계: 편집 모드 (냉정한 다듬기)
- 두 모드를 동시에 하면 → 마비 (Writer's Block)

뇌 과학:
- 창조 모드: 우뇌 (확산적 사고, Divergent Thinking)
- 편집 모드: 좌뇌 (수렴적 사고, Convergent Thinking)
- 동시 활성화 불가 → 순차적으로 사용해야 효율적

내적 비평가 제거:
- Gilbert (2009): 내적 비평가는 창의성을 억압합니다
- "쓰는 동안 비판하지 말고, 비판하는 동안 쓰지 말라"

연구 증거:
- Elbow (1998): "Freewriting" 기법은 아이디어 생성을 2배 증가
- Boice (1990): 매일 조금씩 쓰는 것이 한번에 많이 쓰는 것보다 효과적
  * 완벽주의 작가: 막힘 경험 多
  * 80% 작가: 꾸준한 생산성
                    """
                },
                "expected_resistance": "너무 엉망이라 부끄럽게 느껴질 수 있습니다.",
                "breakthrough_strategy": "아무도 당신의 초안을 보지 않습니다. 이것은 오직 당신만의 연습입니다.",
                "evening_reflection": "초안을 수정 없이 쓸 때 어떤 느낌이었나요?",
                "micro_win": "15분간 수정 없이 썼다면 → 성공! ✅"
            },
            
            # Day 11
            {
                "day": 11,
                "week": 2,
                "title": "💬 피드백 요청 연습",
                "morning_ritual": "불완전한 상태로 공유하는 것은 용기입니다.",
                "core_practice": {
                    "name": "WIP(Work In Progress) 공유",
                    "duration": "하루 종일",
                    "steps": [
                        "1. 현재 진행 중인 작업을 선택합니다",
                        "   (완성도 50-70% 정도)",
                        "",
                        "2. 신뢰하는 사람 1명을 선택합니다",
                        "   (동료, 친구, 멘토)",
                        "",
                        "3. 이렇게 말합니다:",
                        "   '이건 초안이고 아직 완성되지 않았어요.",
                        "    방향이 맞는지 피드백 받고 싶어요.",
                        "    [구체적 질문: 예를 들어, 구조가 명확한가요?]'",
                        "",
                        "4. 피드백을 받습니다",
                        "5. 피드백 후 이렇게 기록합니다:",
                        "   • 받은 피드백:",
                        "   • 예상했던 비판이 나왔나요?",
                        "   • 실제로 나온 반응은?",
                        "   • 불완전함을 공유한 후 느낌은?"
                    ],
                    "why_it_works": "완벽주의자는 '완벽해야 보여줄 수 있다'고 믿습니다. 조기 피드백은 방향을 빠르게 수정할 수 있게 합니다.",
                    "psychology_background": """
**배경 심리학: 애자일 사고방식 (Agile Mindset)**

반복적 개발 (Iterative Development):
- 완벽한 최종본 1개 < 개선되는 초안 5개
- 조기 피드백은 큰 실패를 예방합니다
- "Fail fast, learn faster"

심리적 안전감 (Psychological Safety):
- Edmondson (1999): 실수를 공유할 수 있는 환경이 학습을 가속화
- 불완전함을 보여주는 것은 신뢰를 구축합니다
- 완벽 가면 < 진정한 취약성

피드백 탐색 행동 (Feedback Seeking):
- Ashford & Cummings (1983): 능동적 피드백 요청은 성과를 향상
- 완벽주의자는 피드백을 두려워 → 개선 기회 상실
- 성장형 사고는 피드백을 환영

연구 증거:
- De Stobbeleir et al. (2011): 피드백 탐색은 창의성과 정적 상관
- Tuckey et al. (2002): 조기 피드백은 최종 결과물의 품질을 향상
- VandeWalle (2003): 학습 목표 지향은 피드백 탐색을 증가
                    """
                },
                "expected_resistance": "비판받을까봐 두렵거나, 능력이 없다고 보일까봐 걱정됩니다.",
                "breakthrough_strategy": "'초안입니다'라고 명시하세요. 이 한 문장이 기대치를 조정하고 심리적 안전감을 만듭니다.",
                "evening_reflection": "피드백을 요청했을 때 실제 반응은 예상과 달랐나요?",
                "micro_win": "불완전한 작업을 1명에게 공유했다면 → 성공! ✅"
            },
            
            # Day 12
            {
                "day": 12,
                "week": 2,
                "title": "🚫 '완벽 압박' 인식하기",
                "morning_ritual": "나는 왜 완벽해야 한다고 믿는가?",
                "core_practice": {
                    "name": "완벽주의 뿌리 탐색",
                    "duration": "20분",
                    "steps": [
                        "1. 종이에 이 질문들을 씁니다:",
                        "",
                        "   • 나는 누구에게 완벽하게 보이고 싶은가?",
                        "   • 완벽하지 않으면 무슨 일이 일어날까?",
                        "   • '완벽해야 한다'는 믿음은 언제부터 시작됐나?",
                        "   • 누가 나에게 이 기준을 심어줬나? (부모, 선생님, 사회)",
                        "   • 완벽주의가 나를 지켜준 적이 있나?",
                        "   • 완벽주의가 나에게서 빼앗아간 것은?",
                        "",
                        "2. 각 질문에 최소 3문장씩 답합니다",
                        "",
                        "3. 마지막 질문:",
                        "   '만약 완벽하지 않아도 괜찮다면, 나는 무엇을 할까?'",
                        "",
                        "4. 이 답을 크게 소리 내어 읽습니다"
                    ],
                    "why_it_works": "완벽주의는 보호 전략으로 시작됩니다. 그 뿌리를 이해하면 놓아줄 수 있습니다.",
                    "psychology_background": """
**배경 심리학: 완벽주의의 발달적 기원**

Hamachek (1978): 완벽주의의 두 유형
- 적응적 완벽주의: 높은 기준 + 실패 수용
- 부적응적 완벽주의: 높은 기준 + 실패 불내성

발달 심리:
- Flett et al. (2002): 완벽주의는 어린 시절 형성됩니다
  * 조건적 사랑: "A를 받으면 사랑받는다"
  * 높은 기대: "넌 할 수 있어" (압박)
  * 비판적 양육: "왜 이것밖에 못 했니?"

조건부 자기가치 (Contingent Self-Worth):
- Crocker & Wolfe (2001): 외부 성취로 가치를 증명하려는 시도
- 완벽함 = 사랑받을 자격
- 실패 = 가치 상실

보호 기능:
- 완벽주의는 거절과 비판으로부터 자신을 보호하는 전략
- "완벽하면 아무도 나를 비판하지 못한다"
- 하지만 이 갑옷은 너무 무겁습니다

연구 증거:
- Frost et al. (1990): 부모의 비판과 높은 기대는 완벽주의 성향을 예측
- Hewitt et al. (2017): 완벽주의는 우울, 불안, 자살 사고와 강한 상관
                    """
                },
                "expected_resistance": "과거를 파헤치는 것이 고통스럽거나 부모를 비난하는 것 같아 불편할 수 있습니다.",
                "breakthrough_strategy": "이것은 비난이 아니라 이해입니다. '왜'를 알면 '어떻게 바꿀지'도 알게 됩니다.",
                "evening_reflection": "완벽주의가 나를 지켜준 순간과 빼앗아간 것을 비교해보세요.",
                "micro_win": "질문 중 3개 이상 답했다면 → 성공! ✅"
            },
            
            # Day 13
            {
                "day": 13,
                "week": 2,
                "title": "🎭 '충분함' 선언하기",
                "morning_ritual": "나는 충분하다. 완벽하지 않아도 충분하다.",
                "core_practice": {
                    "name": "충분함 맨트라 작성",
                    "duration": "15분",
                    "steps": [
                        "1. 어제 탐색한 내용을 다시 읽습니다",
                        "",
                        "2. 완벽주의 믿음을 '충분함 믿음'으로 전환합니다:",
                        "",
                        "   예시:",
                        "   ❌ '100%가 아니면 의미 없다'",
                        "   → ✅ '80%도 가치 있는 결과다'",
                        "",
                        "   ❌ '실수하면 무능한 사람이다'",
                        "   → ✅ '실수는 배움의 기회다'",
                        "",
                        "   ❌ '타인의 인정이 내 가치를 증명한다'",
                        "   → ✅ '나의 가치는 존재 자체에 있다'",
                        "",
                        "3. 나만의 '충분함 선언문' 작성 (3-5문장):",
                        "   예: '나는 완벽하지 않아도 충분히 가치 있다.",
                        "        나의 노력은 결과와 무관하게 의미가 있다.",
                        "        나는 실수할 권리가 있다.'",
                        "",
                        "4. 이 선언문을 거울 앞에서 3번 읽습니다",
                        "5. 스마트폰 배경화면이나 메모로 저장합니다"
                    ],
                    "why_it_works": "새로운 믿음을 반복하면 신경회로가 재구성됩니다. 선언은 행동을 바꾸는 첫 단계입니다.",
                    "psychology_background": """
**배경 심리학: 자기 확언 (Self-Affirmation)**

Steele (1988) - 자기 확언 이론:
- 자기 확언은 위협에 대한 방어 반응을 줄입니다
- 핵심 가치를 상기하면 실패의 타격이 줄어듭니다
- "나는 충분하다"는 믿음이 완벽주의 압박을 완화

신경과학:
- Cascio et al. (2016, SCAN): 자기 확언은 뇌의 보상 회로를 활성화
- 복내측 전전두엽 피질(vmPFC) 활성화 → 자기 관련 긍정 처리
- 반복된 확언은 신경 경로를 강화합니다

인지 재구조화 (Cognitive Restructuring):
- Beck (1976): 자동적 부정 사고를 식별하고 도전하기
- 완벽주의 사고 → 충분함 사고로 전환
- "All-or-Nothing" → "Good Enough"

연구 증거:
- Cohen & Sherman (2014): 자기 확언은 학업 성취 격차를 줄였습니다
- Creswell et al. (2013): 자기 확언은 스트레스 호르몬(코르티솔)을 감소
- Falk et al. (2015): 자기 확언은 건강 행동 변화를 촉진
                    """
                },
                "expected_resistance": "공허하거나 진심이 아닌 것 같아 거부감이 들 수 있습니다.",
                "breakthrough_strategy": "처음엔 거짓말처럼 느껴져도 괜찮습니다. 21일 반복하면 뇌가 진실로 받아들입니다.",
                "evening_reflection": "오늘 '충분함'을 느낀 순간이 있었나요?",
                "micro_win": "선언문을 작성하고 1번 읽었다면 → 성공! ✅"
            },
            
            # Day 14
            {
                "day": 14,
                "week": 2,
                "title": "🎉 Week 2 복습 & 80% 축하",
                "morning_ritual": "나는 이번 주도 완벽하지 않게 잘 해냈다.",
                "core_practice": {
                    "name": "주간 돌아보기 + 80% 실험 결과",
                    "duration": "20분",
                    "steps": [
                        "1. 이번 주 일기 복습 (Day 8-13)",
                        "",
                        "2. 80% 실험 결과 정리:",
                        "   • 80%로 완성한 작업 개수: ___개",
                        "   • 타인의 부정적 피드백: ___건",
                        "   • 예상했던 재앙이 실제로 일어났나? (Y/N)",
                        "   • 스트레스 수준 변화: Before ___ → After ___",
                        "",
                        "3. 가장 어려웠던 실천:",
                        "   • Day ___ : [실천 이름]",
                        "   • 왜 어려웠나?",
                        "   • 다음 주 개선 방법:",
                        "",
                        "4. 가장 효과적이었던 실천:",
                        "   • Day ___ : [실천 이름]",
                        "   • 왜 효과적이었나?",
                        "   • Week 3에서도 계속할까? (Y/N)",
                        "",
                        "5. 자신에게 축하 메시지:",
                        "   '나는 이번 주 [구체적 성과]를 이뤘다.",
                        "    완벽하지 않았지만 [긍정적 변화]가 있었다.",
                        "    나는 [강점]을 발휘했다.'"
                    ],
                    "why_it_works": "80% 실험의 결과를 구체적으로 확인하면, '완벽하지 않아도 괜찮다'는 믿음이 강화됩니다.",
                    "psychology_background": """
**배경 심리학: 행동 실험 (Behavioral Experiment)**

Beck (1979) - 인지행동치료 핵심 기법:
- 믿음을 실험으로 검증하기
- "완벽하지 않으면 거절당한다" → 80% 실험으로 검증
- 실제 결과: 대부분 사람들은 차이를 모르거나 신경 쓰지 않습니다

예측 vs 현실:
- 완벽주의자는 재앙적 예측(Catastrophizing)을 합니다
- "80%로 제출하면 해고될 것이다" (예측)
- "아무 일도 일어나지 않았다" (현실)
- 이 괴리를 경험하는 것이 치유입니다

자기효능감 구축:
- Bandura (1997): 숙달 경험(Mastery Experience)이 자신감을 높입니다
- "80%로도 괜찮았다"는 경험이 쌓이면 완벽주의 압박 감소

연구 증거:
- Bennet-Levy et al. (2004): 행동 실험은 믿음 변화의 가장 강력한 도구
- Burns (1980): 완벽주의자가 "80% 충분" 경험을 10회 이상 반복하면
  완벽주의 점수가 평균 40% 감소
                    """
                },
                "expected_resistance": "변화가 작아서 의미 없다고 느낄 수 있습니다.",
                "breakthrough_strategy": "작은 변화도 누적되면 큰 변화입니다. 2주 전 당신은 이 페이지조차 보지 않았습니다.",
                "evening_reflection": "Week 2를 완료한 나에게: [자유롭게 축하 메시지 쓰기]",
                "micro_win": "Week 2를 완료했다면 → 당신은 이미 80% 달성! 🎉",
                "celebration": "🎊 Week 2 완료! 당신은 완벽주의를 내려놓는 법을 배웠습니다. Week 3로 갑니다."
            }
        ]
    
    # ========================================
    # WEEK 3: 공통 인간성 인식 (Day 15-21)
    # ========================================
    
    def _week3_days(self) -> List[Dict]:
        """Week 3: 공통 인간성 인식 (Common Humanity)"""
        return [
            # Day 15
            {
                "day": 15,
                "week": 3,
                "title": "🌍 당신만 힘든 게 아닙니다",
                "morning_ritual": "모두가 자기만의 전쟁을 치르고 있습니다.",
                "core_practice": {
                    "name": "공통 인간성 일기",
                    "duration": "10분",
                    "steps": [
                        "1. 오늘 또는 최근에 겪은 힘든 순간을 떠올립니다",
                        "",
                        "2. 이 질문에 답해봅니다:",
                        "   • 나와 비슷한 상황을 겪은 사람이 또 있을까?",
                        "   • 전 세계에서 지금 이 순간 나와 같은 고통을 느끼는 사람은?",
                        "   • 이 고통은 인간이라면 누구나 경험할 수 있는 것일까?",
                        "",
                        "3. 이 문장을 완성합니다:",
                        "   '나만 이런 게 아니구나. [구체적 상황]은/는",
                        "    많은 사람들이 경험하는 인간의 보편적 고통이다.'",
                        "",
                        "4. 같은 고통을 겪고 있을 누군가에게 보내는 마음:",
                        "   '당신도 힘들겠네요. 우리 함께 버텨요.'"
                    ],
                    "why_it_works": "고립감은 고통을 증폭시킵니다. '나만'에서 '우리'로 전환하면 고통이 줄어듭니다.",
                    "psychology_background": """
**배경 심리학: 공통 인간성 (Common Humanity)**

Kristin Neff (2003) - 자기자비의 3요소 중 하나:
1. 자기 친절 (Self-Kindness)
2. 공통 인간성 (Common Humanity) ← 오늘!
3. 마음챙김 (Mindfulness)

고립 vs. 연결:
- 고통받을 때 우리는 "나만 이래"라고 생각합니다
- 이것은 고립감(Isolation)을 만들고 고통을 증폭시킵니다
- 공통 인간성: "모두가 힘들다"는 인식
- 고통은 인간 경험의 일부입니다

사회적 고통의 신경과학:
- Eisenberger et al. (2003): 사회적 거절 = 물리적 고통과 동일한 뇌 영역 활성화
- 전대상피질(Anterior Cingulate Cortex)
- 고립감은 실제로 아픕니다

연결감의 치유 효과:
- Brown (2012): 취약성 공유는 연결을 만듭니다
- "나만 그런 게 아니구나" → 수치심 감소
- 보편성 인식 → 자기비판 감소

연구 증거:
- Neff & Pommier (2013): 공통 인간성 ↑ → 우울 ↓, 삶의 만족 ↑
- Germer & Neff (2015): 공통 인간성은 자기자비의 핵심 예측 변인
                    """
                },
                "expected_resistance": "'하지만 다른 사람들은 나보다 잘 해내잖아' 같은 생각이 들 수 있습니다.",
                "breakthrough_strategy": "겉으로 보이는 것과 실제는 다릅니다. 모두가 SNS에는 좋은 모습만 올립니다. 보이지 않는 전쟁을 기억하세요.",
                "evening_reflection": "오늘 '나만'에서 '우리'로 시각이 조금이라도 바뀌었나요?",
                "micro_win": "타인의 고통에 공감하고 연결감을 느꼈다면 → 성공! ✅"
            },
            
            # Day 16
            {
                "day": 16,
                "week": 3,
                "title": "👥 '나만 이상한 게 아니야' 증거 수집",
                "morning_ritual": "불완전함은 인간의 조건입니다.",
                "core_practice": {
                    "name": "보편성 증거 수집",
                    "duration": "15분",
                    "steps": [
                        "1. 내가 '나만 이런가?'라고 생각했던 것 3가지 적기:",
                        "   예: 실수, 실패, 불안, 자기의심, 외로움",
                        "",
                        "2. 각 항목에 대해 증거 찾기 (온라인 검색 OK):",
                        "   • 통계 자료: 'OO 겪는 사람 비율'",
                        "   • 다른 사람들의 이야기: 포럼, 블로그, 책",
                        "   • 주변 사람들의 경험 (물어보기)",
                        "",
                        "3. 각 항목별로 이렇게 정리:",
                        "   [내 생각] 나만 이런 줄 알았다:",
                        "   → [증거] 실제로는:",
                        "",
                        "   예:",
                        "   [내 생각] 나만 일을 미루는 것 같다",
                        "   → [증거] 대학생 75%가 습관적 미루기 경험 (Steel, 2007)",
                        "",
                        "4. 이 사실을 알고 난 지금의 느낌은?"
                    ],
                    "why_it_works": "구체적인 증거는 '나만'이라는 믿음을 깨뜨립니다. 데이터는 거짓말하지 않습니다.",
                    "psychology_background": """
**배경 심리학: 인지적 재구조화 & 정상화 (Normalization)**

인지행동치료 (CBT):
- Beck (1979): 부정확한 믿음에 도전하기
- "나만 이래" = 인지 왜곡 (Cognitive Distortion)
- 증거 수집 → 현실 검증 → 믿음 수정

정상화 (Normalization):
- 심리치료 기법: 경험을 보편적 맥락에 놓기
- "당신만 그런 게 아닙니다" (Universalizing)
- 병리화 ↓, 수용 ↑

보편성 역설:
- 우리는 자신의 내면만 보고, 타인의 겉모습만 봅니다
- 비교는 항상 불공평합니다
- "모두가 가면을 쓰고 있다" - Goffman (1959)

통계의 힘:
- 숫자는 고립감을 깨뜨립니다
- "40%의 사람들이..." → "아, 거의 절반이구나"
- 개인적 실패 → 인간의 보편적 경험

연구 증거:
- Frank (1961): 보편성은 집단치료의 치유 인자
- Yalom (1995): "나만 그런 게 아니구나" → 수치심 50% 감소
- Brown (2007): 완벽주의와 수치심은 고립감에서 자랍니다
                    """
                },
                "expected_resistance": "'통계는 나와 상관없어', '나는 정말 특이한 케이스야' 같은 저항이 올 수 있습니다.",
                "breakthrough_strategy": "특별히 나쁜 것도, 특별히 좋은 것도 없습니다. 우리는 모두 인간입니다. 그것으로 충분합니다.",
                "evening_reflection": "증거를 보고 나니, '나만'이라는 생각이 조금 약해졌나요?",
                "micro_win": "보편성 증거를 3개 이상 찾았다면 → 성공! ✅"
            },
            
            # Day 17
            {
                "day": 17,
                "week": 3,
                "title": "💬 취약성 나누기 실험",
                "morning_ritual": "진짜 나를 보여줄 때, 진짜 연결이 시작됩니다.",
                "core_practice": {
                    "name": "안전한 취약성 나누기",
                    "duration": "상황에 따라 (준비 10분)",
                    "steps": [
                        "1. 신뢰할 수 있는 사람 1명 선택:",
                        "   • 비밀을 지켜줄 사람",
                        "   • 판단하지 않을 사람",
                        "   • 따뜻하게 들어줄 사람",
                        "",
                        "2. 나눌 내용 정하기 (부담 없는 수준으로):",
                        "   레벨 1 (가벼움): '요즘 피곤해'",
                        "   레벨 2 (중간): '사실 요즘 불안해'",
                        "   레벨 3 (깊음): '이런 고민이 있어...'",
                        "",
                        "3. 이렇게 시작하기:",
                        "   '있잖아, 나 요즘 [감정/상황]이거든.",
                        "    혹시 너도 이런 경험 있어?'",
                        "",
                        "4. 상대의 반응 관찰:",
                        "   • 거절/비판 받았나요?",
                        "   • 공감/이해 받았나요?",
                        "   • 상대도 비슷한 경험을 나눴나요?",
                        "",
                        "5. 대화 후 느낌 기록:",
                        "   • 나누기 전 두려움: [   ]",
                        "   • 나눈 후 느낌: [   ]",
                        "   • 예상과 실제의 차이: [   ]"
                    ],
                    "why_it_works": "취약성을 나눌 때 우리는 진정한 연결을 경험합니다. 완벽한 척은 고립을 만듭니다.",
                    "psychology_background": """
**배경 심리학: 취약성과 연결 (Vulnerability & Connection)**

Brené Brown (2012) - 취약성 연구:
- 취약성(Vulnerability) = 불확실성, 위험, 감정적 노출
- 완벽한 척하기 = 연결 차단
- 진짜 나를 보여줄 때 → 진짜 연결 가능

수치심 vs. 죄책감:
- Brown (2006): 수치심은 고립 속에서 자랍니다
- "나는 나쁘다" (수치심) vs. "내가 나쁜 일을 했다" (죄책감)
- 수치심 해독제 = 공감과 연결

자기 개방의 상호성:
- Jourard (1971): Self-Disclosure 연구
- 한 사람이 취약성을 보이면 → 상대도 열립니다
- 깊이는 깊이를 부릅니다

사회적 지지:
- Cohen & Wills (1985): 사회적 지지는 스트레스 완충 효과
- 하지만 완벽한 척하면 → 진짜 지지를 받을 수 없습니다
- "나 괜찮아" (거짓) vs. "사실 힘들어" (진실)

신경과학:
- Cozolino (2014): 연결은 뇌를 치유합니다
- 안전한 관계 → 옥시토신 분비 → 진정 시스템 활성화
- 고립 → 코르티솔 증가 → 위협 시스템 활성화

연구 증거:
- Pennebaker (1997): 트라우마를 나누면 면역 기능 개선
- Clark & Lemay (2010): 취약성 표현은 관계 친밀도를 높입니다
- Reis & Shaver (1988): 반응성(Responsiveness)이 핵심 - 상대가 따뜻하게 반응하면 연결 강화
                    """
                },
                "expected_resistance": "'거절당하면 어떡하지?', '약한 사람으로 보이면 어떡하지?' 같은 두려움이 클 수 있습니다.",
                "breakthrough_strategy": "레벨 1부터 시작하세요. 작은 취약성으로 실험하고, 안전한 반응을 확인한 후 점차 깊이를 더하세요.",
                "evening_reflection": "나눈 후 실제로 어땠나요? 예상과 다른 점은?",
                "micro_win": "작은 취약성이라도 나누고 반응을 경험했다면 → 성공! ✅"
            },
            
            # Day 18
            {
                "day": 18,
                "week": 3,
                "title": "🤝 '우리'의 언어로 말하기",
                "morning_ritual": "'나만'이 아니라 '우리'입니다.",
                "core_practice": {
                    "name": "'우리' 언어 연습",
                    "duration": "15분",
                    "steps": [
                        "1. 자기비판적 생각을 '나만' 언어로 적기:",
                        "   예: '나만 이렇게 못하나봐'",
                        "       '나는 왜 이렇게 불안할까'",
                        "       '나만 외로운 것 같아'",
                        "",
                        "2. 같은 내용을 '우리' 언어로 바꾸기:",
                        "   예: '많은 사람들이 이런 어려움을 겪어'",
                        "       '불안은 인간의 보편적 감정이야'",
                        "       '외로움은 누구나 경험하는 거야'",
                        "",
                        "3. 구체적 증거 추가하기:",
                        "   예: '직장인 70%가 임포스터 신드롬 경험 (Sakulku, 2011)'",
                        "       '불안장애 평생 유병률 30% (Kessler et al., 2005)'",
                        "       '외로움 역학 연구: 성인 40% 경험 (Cigna, 2020)'",
                        "",
                        "4. 이 '우리' 문장들을 크게 읽어봅니다 (3회)",
                        "",
                        "5. 오늘 하루, 자기비판이 올라올 때마다:",
                        "   '나만' → '우리'로 의식적으로 바꿔 말하기"
                    ],
                    "why_it_works": "언어는 생각을 만듭니다. '우리' 언어는 고립에서 연결로 전환시킵니다.",
                    "psychology_background": """
**배경 심리학: 언어와 인지 프레이밍 (Language & Cognitive Framing)**

Sapir-Whorf 가설 (언어 상대성):
- 우리가 사용하는 언어는 생각을 형성합니다
- "나만" 언어 → 고립감 강화
- "우리" 언어 → 연결감 증가

프레이밍 효과 (Framing Effect):
- Tversky & Kahneman (1981): 동일한 정보도 표현 방식에 따라 인식 변화
- "나만 실패했다" (개인화) vs. "많은 사람이 실패를 경험한다" (보편화)
- 후자는 수치심을 줄이고 자기자비를 높입니다

자기 대화 (Self-Talk):
- Kross et al. (2014): 3인칭 자기 대화 ("You" vs. "I")
- "너는 할 수 있어" > "나는 할 수 있어"
- 심리적 거리 → 감정 조절 ↑

집단 정체성 (Collective Identity):
- Tajfel (1979): 사회 정체성 이론
- "우리"는 소속감을 만듭니다
- 고립 → 연결 → 안전감 → 회복력

신경 언어 프로그래밍 (NLP):
- 언어 패턴 변화 → 신경 회로 변화
- 반복된 "우리" 언어 → 새로운 사고 습관

연구 증거:
- Neff (2003): 공통 인간성 언어는 자기자비 핵심 요소
- Pennebaker (2011): "I" 단어 빈도 ↑ → 우울 상관
- "We" 언어는 소속감과 정신 건강 증진
                    """
                },
                "expected_resistance": "'그래도 내 문제는 특별해' 또는 '억지로 바꾸는 것 같아' 같은 생각이 들 수 있습니다.",
                "breakthrough_strategy": "처음엔 어색할 수 있습니다. 하지만 언어는 도구입니다. 다른 도구를 사용하면 다른 결과가 나옵니다.",
                "evening_reflection": "'우리' 언어를 사용했을 때 기분이 어땠나요?",
                "micro_win": "하루에 3번 이상 '나만'을 '우리'로 바꿨다면 → 성공! ✅"
            },
            
            # Day 19
            {
                "day": 19,
                "week": 3,
                "title": "🌟 타인에게 자비 베풀기",
                "morning_ritual": "다른 사람에게 자비로울 때, 나에게도 자비로워집니다.",
                "core_practice": {
                    "name": "자비 명상 (Loving-Kindness Meditation)",
                    "duration": "15분",
                    "steps": [
                        "1. 편안하게 앉아 눈을 감습니다",
                        "",
                        "2. 먼저 자신에게 (2분):",
                        "   '나는 행복하기를'",
                        "   '나는 고통에서 자유롭기를'",
                        "   '나는 평화롭기를'",
                        "",
                        "3. 사랑하는 사람에게 (3분):",
                        "   [이름]의 얼굴을 떠올리며:",
                        "   '당신이 행복하기를'",
                        "   '당신이 고통에서 자유롭기를'",
                        "   '당신이 평화롭기를'",
                        "",
                        "4. 중립적 사람에게 (3분):",
                        "   (오늘 스쳐 지나간 누군가)",
                        "   같은 문구 반복",
                        "",
                        "5. 어려운 사람에게 (3분):",
                        "   (나에게 힘들게 한 사람)",
                        "   같은 문구 반복 (가능한 범위에서)",
                        "",
                        "6. 모든 존재에게 (4분):",
                        "   '모든 생명이 행복하기를'",
                        "   '모든 생명이 고통에서 자유롭기를'",
                        "   '모든 생명이 평화롭기를'",
                        "",
                        "※ 어려운 사람 단계에서 저항이 크면 건너뛰어도 OK"
                    ],
                    "why_it_works": "타인에게 자비를 연습하면 자기 자비 능력도 함께 자랍니다. 뇌는 방향을 구별하지 못합니다.",
                    "psychology_background": """
**배경 심리학: 자애 명상 (Loving-Kindness Meditation, Metta)**

불교 심리학:
- 2,500년 전통의 자비 수행
- Metta (자애): 모든 존재의 행복을 바라는 마음
- 순서: 자신 → 사랑하는 이 → 중립 → 어려운 이 → 모든 존재

신경과학 연구:
- Lutz et al. (2008): 자애 명상은 뇌를 변화시킵니다
- 전대상피질, 섬엽(Insula) 활성화 → 공감 회로
- 편도체 반응 감소 → 위협 인식 감소
- 장기 수행자: 감마파 증가 (통찰과 연결)

자비와 행복:
- Fredrickson et al. (2008): 7주 자애 명상 → 긍정 정서 ↑, 삶의 만족 ↑
- 자기 자비와 타인 자비는 동일한 신경 회로 사용
- 타인에게 자비 → 자기 자비 능력 강화

사회적 연결감:
- Kok et al. (2013): 자애 명상 → 미주신경 톤 증가
- 미주신경 = 사회적 연결 시스템
- 자율신경계 안정 → 스트레스 회복력 ↑

역설적 효과:
- 어려운 사람에게도 자비를 보내면:
  * 나의 분노가 줄어듭니다 (그들이 변해서가 아니라)
  * 원한을 놓아줌 = 나를 자유롭게 함

연구 증거:
- Hofmann et al. (2011): 자애 명상 → 우울 -27%, 불안 -22%
- Pace et al. (2009): 6주 자비 명상 → 염증 마커(IL-6) 감소
- Galante et al. (2014): 메타분석 - 자애 명상은 우울, 자기비판에 효과적
                    """
                },
                "expected_resistance": "'어려운 사람한테까지는 무리야', '위선 같아' 같은 저항이 올 수 있습니다.",
                "breakthrough_strategy": "완벽하게 할 필요 없습니다. 진심이 안 느껴져도 괜찮습니다. 연습일 뿐입니다. 어려운 사람 단계는 건너뛰어도 됩니다.",
                "evening_reflection": "명상 후 마음이 어떤가요? 조금이라도 부드러워졌나요?",
                "micro_win": "자애 명상 15분을 완료했다면 → 성공! ✅"
            },
            
            # Day 20
            {
                "day": 20,
                "week": 3,
                "title": "🎭 완벽한 척 내려놓기",
                "morning_ritual": "나는 완벽하지 않아도 충분히 사랑받을 자격이 있습니다.",
                "core_practice": {
                    "name": "'완벽한 척' 의식적 내려놓기",
                    "duration": "하루 종일 (준비 10분)",
                    "steps": [
                        "1. '완벽한 척 목록' 작성:",
                        "   내가 평소에 완벽한 척하는 영역:",
                        "   □ 일 (실수 없는 척)",
                        "   □ 관계 (항상 괜찮은 척)",
                        "   □ 외모 (흠 없는 척)",
                        "   □ 감정 (긍정적인 척)",
                        "   □ 능력 (다 아는 척)",
                        "",
                        "2. 오늘 하루 실험: '작은 불완전함' 의도적으로 보이기",
                        "",
                        "   레벨 1 (안전):",
                        "   • '이거 잘 모르겠네요'라고 솔직히 말하기",
                        "   • 도움 요청하기",
                        "",
                        "   레벨 2 (중간):",
                        "   • '사실 저도 실수했어요' 고백하기",
                        "   • '요즘 힘들어요' 표현하기",
                        "",
                        "   레벨 3 (도전):",
                        "   • 메이크업 안 하고 나가기",
                        "   • SNS에 완벽하지 않은 순간 올리기",
                        "",
                        "3. 각 실험 후 관찰:",
                        "   • 예상: [무슨 일이 일어날 것 같았나요?]",
                        "   • 실제: [실제로 무슨 일이 일어났나요?]",
                        "   • 느낌: [어떤 기분이었나요?]",
                        "",
                        "4. 저녁에 정리:",
                        "   • 완벽한 척을 내려놓았을 때 잃은 것:",
                        "   • 완벽한 척을 내려놓았을 때 얻은 것:"
                    ],
                    "why_it_works": "완벽한 척은 에너지를 소모하고 진짜 연결을 막습니다. 불완전함을 보일 때 진짜 나를 만납니다.",
                    "psychology_background": """
**배경 심리학: 가면과 진정성 (Persona & Authenticity)**

Carl Jung - 페르소나 (Persona):
- 페르소나 = 사회적 가면
- 적응을 위해 필요하지만, 과도하면:
  * 진짜 자기(Self)와 단절
  * 공허감, 정체성 혼란
- 통합 = 가면과 진짜 자기의 균형

Authenticity (진정성):
- Rogers (1961): Congruence (일치)
- 내면과 외면이 일치할 때 심리적 웰빙
- 불일치 = 불안과 우울의 근원

완벽주의의 가면:
- Hewitt & Flett (1991): Socially Prescribed Perfectionism
- "완벽해야 사랑받는다"는 믿음
- 가면은 보호이자 감옥

취약성의 역설:
- Brown (2012): 취약성 = 진정성의 핵심
- 불완전함을 보일 때 → 진짜 연결 가능
- 완벽한 척 = 연결 차단

사회적 관계에서의 진정성:
- Kernis & Goldman (2006): 진정성 4요소
  1. Self-awareness (자기 인식)
  2. Unbiased processing (편향 없는 처리)
  3. Authentic behavior (진실된 행동)
  4. Relational authenticity (관계적 진정성)

연구 증거:
- Wood et al. (2008): 진정성 ↑ → 삶의 만족 ↑, 우울 ↓
- Goldman & Kernis (2002): 진정성은 자존감보다 웰빙을 더 잘 예측
- Deci & Ryan (2000): 진정한 자기 표현 = 심리적 욕구 충족
                    """
                },
                "expected_resistance": "'완벽하지 않으면 거절당할 것 같아', '약하게 보이면 어떡하지' 같은 두려움이 클 수 있습니다.",
                "breakthrough_strategy": "레벨 1부터 시작하세요. 작은 불완전함으로 실험하고, 세상이 무너지지 않는다는 것을 경험하세요.",
                "evening_reflection": "완벽한 척을 내려놓았을 때, 정말로 거절당했나요? 아니면 오히려 더 깊은 연결을 경험했나요?",
                "micro_win": "작은 불완전함이라도 의도적으로 보였다면 → 성공! ✅"
            },
            
            # Day 21
            {
                "day": 21,
                "week": 3,
                "title": "🎉 Week 3 복습 & 축하",
                "morning_ritual": "나는 혼자가 아닙니다. 우리는 함께 성장하고 있습니다.",
                "core_practice": {
                    "name": "Week 3 통합 점검",
                    "duration": "20분",
                    "steps": [
                        "1. Week 3 핵심 질문:",
                        "   • Day 15: '나만'에서 '우리'로 시각이 바뀌었나요?",
                        "   • Day 16: 보편성 증거를 발견했나요?",
                        "   • Day 17: 취약성을 나누는 경험은 어땠나요?",
                        "   • Day 18: '우리' 언어를 사용했나요?",
                        "   • Day 19: 타인에게 자비를 보냈나요?",
                        "   • Day 20: 완벽한 척을 내려놓았나요?",
                        "",
                        "2. 가장 큰 깨달음:",
                        "   Week 3에서 가장 의미 있었던 순간은?",
                        "",
                        "3. 여전히 어려운 점:",
                        "   아직도 '나만'이라고 느껴지는 부분은?",
                        "",
                        "4. Week 4를 향한 다짐:",
                        "   '나는 혼자가 아니다'를 기억하며,",
                        "   이제 [          ]을/를 실천하겠습니다."
                    ],
                    "why_it_works": "복습은 배움을 통합합니다. 한 주를 돌아보며 변화를 확인하세요.",
                    "psychology_background": """
**배경 심리학: 통합과 전환 (Integration & Transition)**

학습 통합:
- Kolb (1984): 경험 학습 사이클
- 구체적 경험 → 성찰 → 개념화 → 실험
- Week 3 = 경험, 오늘 = 성찰과 통합

마일스톤 효과:
- 목표 진행 중 중간 지점 인식 → 동기 강화
- 21일 = 전체 28일의 75%
- 성취감 → 마지막 주 추진력

공통 인간성의 심화:
- Week 3는 고립에서 연결로의 전환
- Neff (2003): 자기자비의 핵심은 "나만이 아니다"
- 이 인식이 자기비판을 줄입니다

연구 증거:
- 21일 규칙: 습관 형성의 중요한 시점 (Lally et al., 2010)
- 3주차는 변화가 안정화되기 시작하는 시기
- 이제 Week 4에서 통합과 지속을 준비합니다
                    """
                },
                "expected_resistance": "'아직도 변화가 안 느껴져' 같은 조급함이 올 수 있습니다.",
                "breakthrough_strategy": "변화는 천천히 옵니다. 28일 전 당신을 떠올려보세요. 지금 당신은 이미 다릅니다.",
                "evening_reflection": "Week 3를 완주한 나에게 축하 메시지를 써보세요.",
                "micro_win": "Week 3를 완료했다면 → 당신은 이미 75% 달성! 🎉✅",
                "celebration": """
🎊 Week 3 완료! 축하합니다! 🎊

당신은 이제 알고 있습니다:
✅ 나만 힘든 게 아니다
✅ 고통은 인간의 보편적 경험이다
✅ 취약성을 나눌 때 진짜 연결이 시작된다
✅ 완벽한 척은 에너지 낭비다
✅ 우리는 함께 성장한다

Week 4에서는 '안정적 자기가치'를 배웁니다.
당신의 가치는 존재 자체에 있습니다.
                """
            }
        ]
    
    # ========================================
    # WEEK 4: 안정적 자기가치 (Day 22-28)
    # ========================================
    
    def _week4_days(self) -> List[Dict]:
        """Week 4: 안정적 자기가치 (Stable Self-Worth)"""
        return [
            # Day 22
            {
                "day": 22,
                "week": 4,
                "title": "💎 존재 자체의 가치",
                "morning_ritual": "나는 무엇을 해도, 하지 않아도 가치 있습니다.",
                "core_practice": {
                    "name": "존재 가치 명상",
                    "duration": "10분",
                    "steps": [
                        "1. 편안하게 앉아 눈을 감습니다",
                        "",
                        "2. 천천히 호흡하며 이 문장들을 마음속으로 반복합니다:",
                        "   • 나는 존재하는 것만으로도 가치가 있다",
                        "   • 나의 가치는 성취와 무관하다",
                        "   • 나는 사랑받을 자격이 있다",
                        "   • 나는 완벽하지 않아도 충분하다",
                        "",
                        "3. 각 문장을 말할 때마다 가슴에 손을 얹고 느껴봅니다",
                        "",
                        "4. 저항이 생기면 (예: '진짜?', '그럴 리 없어'):",
                        "   → 그냥 알아차리고, 다시 문장으로 돌아옵니다",
                        "",
                        "5. 10분 동안 이 과정을 반복합니다"
                    ],
                    "why_it_works": "반복된 확언은 내적 대화를 바꿉니다. '조건부 가치'에서 '존재 가치'로 전환됩니다.",
                    "psychology_background": """
**배경 심리학: 무조건적 긍정적 존중 (Unconditional Positive Regard)**

Carl Rogers (1961) - 인간중심 치료:
- 모든 인간은 존재 자체로 가치가 있습니다
- 조건 없는 수용이 성장을 촉진합니다
- "가치 있는 조건" (Conditions of Worth)에서 벗어나기

조건부 자기가치 문제:
- Crocker & Park (2004): 외부 기준에 의존하면 불안정합니다
- "A학점을 받아야 가치 있다"
- "성공해야 사랑받을 자격이 있다"
- → 실패 = 자기 가치 붕괴

내재적 가치 (Intrinsic Worth):
- Deci & Ryan (2000) - 자기결정이론:
- 외재적 동기 → 내재적 동기로 전환
- 존재 자체가 가치의 근원

신경과학:
- Hutcherson et al. (2015): 자비 명상은 뇌의 보상 회로 활성화
- 복내측 전전두엽 피질(vmPFC) + 선조체
- 자기 수용이 뇌를 변화시킵니다

연구 증거:
- Neff & Vonk (2009): 자기자비는 안정적 자존감을 예측
- Kernis (2003): 안정적 자존감은 외부 사건에 덜 흔들립니다
                    """
                },
                "expected_resistance": "'이건 너무 이상적이야', '현실은 성과로 평가받는데' 같은 회의가 생길 수 있습니다.",
                "breakthrough_strategy": "두 가지가 공존할 수 있습니다: 성과를 추구하되, 가치는 성과와 분리하기. 이것이 진정한 자유입니다.",
                "evening_reflection": "오늘 하루, 나의 존재 가치를 느낀 순간이 있었나요?",
                "micro_win": "존재 가치 명상을 10분 완료했다면 → 성공! ✅"
            },
            
            # Day 23
            {
                "day": 23,
                "week": 4,
                "title": "🌳 내 안의 뿌리 내리기",
                "morning_ritual": "나는 흔들리지 않는 나만의 뿌리가 있습니다.",
                "core_practice": {
                    "name": "핵심 가치 나무 그리기",
                    "duration": "20분",
                    "steps": [
                        "1. 종이 중앙에 나무를 그립니다 (간단해도 OK)",
                        "",
                        "2. 뿌리에 적기: 나의 핵심 가치 3-5개",
                        "   예: 성장, 연결, 정직, 창의성, 기여",
                        "   질문: '내가 정말 중요하게 여기는 것은?'",
                        "",
                        "3. 줄기에 적기: 이 가치들이 나를 지탱한 순간",
                        "   예: '성장' → 실패 후 다시 일어섰던 때",
                        "",
                        "4. 가지에 적기: 앞으로 이 가치로 하고 싶은 일",
                        "   예: '연결' → 한 달에 한 번 친구와 깊은 대화",
                        "",
                        "5. 열매에 적기: 이 가치를 살 때 느끼는 감정",
                        "   예: 보람, 평화, 기쁨, 의미",
                        "",
                        "6. 완성된 나무를 사진 찍어 보관합니다"
                    ],
                    "why_it_works": "가치는 외부 평가와 무관한 내적 나침반입니다. 가치를 명확히 하면 흔들림이 줄어듭니다.",
                    "psychology_background": """
**배경 심리학: 가치 기반 삶 (Values-Based Living)**

Acceptance and Commitment Therapy (ACT) - Hayes et al. (2006):
- 가치 (Values): 삶의 방향을 안내하는 나침반
- 목표 (Goals): 도달하는 지점
- 가치는 '여정' 그 자체입니다

가치와 자존감:
- Crocker & Park (2004): 가치 기반 자존감은 안정적입니다
- 외부 기준 (성과, 외모) vs. 내부 가치 (성장, 연결)
- 가치는 실패해도 사라지지 않습니다

자기 일치성 (Self-Congruence):
- Rogers (1959): 진짜 자기(real self)와 이상적 자기(ideal self)의 일치
- 가치대로 살 때 → 자기 일치 → 심리적 웰빙
- 타인의 기대대로 살 때 → 자기 불일치 → 불안과 우울

연구 증거:
- Cohen et al. (2000): 가치 확인은 스트레스 상황에서 회복력을 높입니다
- David et al. (2019): 가치 기반 개입은 우울 증상을 유의미하게 감소
- Wilson & Murrell (2004): ACT 가치 작업은 삶의 만족도를 증가
                    """
                },
                "expected_resistance": "'내 가치가 뭔지 모르겠어' 또는 '이게 진짜 내 가치인지 확신이 안 서' 같은 혼란이 올 수 있습니다.",
                "breakthrough_strategy": "완벽한 답을 찾으려 하지 마세요. 지금 이 순간 떠오르는 것으로 시작하면 됩니다. 가치는 발견하는 것이 아니라 만들어가는 것입니다.",
                "evening_reflection": "오늘 나의 핵심 가치 중 하나를 실천했나요? 어떤 느낌이었나요?",
                "micro_win": "가치 나무를 완성하고 사진을 찍었다면 → 성공! ✅"
            },
            
            # Day 24
            {
                "day": 24,
                "week": 4,
                "title": "🏔️ 위기 대비 훈련",
                "morning_ritual": "힘든 날이 와도, 나는 내 편입니다.",
                "core_practice": {
                    "name": "자기자비 비상 키트 만들기",
                    "duration": "25분",
                    "steps": [
                        "1. '힘든 날 체크리스트' 작성:",
                        "   □ 자기비판 목소리가 커진다",
                        "   □ 완벽주의 압박이 심해진다",
                        "   □ 모든 게 내 잘못 같다",
                        "   □ 사람들이 날 싫어할 것 같다",
                        "   (나만의 신호 3-5개 추가)",
                        "",
                        "2. 각 신호별 '자기자비 응급처치' 작성:",
                        "",
                        "   예시:",
                        "   신호: 자기비판 목소리가 커진다",
                        "   → 응급처치:",
                        "     • 손을 가슴에 얹고 3번 깊게 호흡",
                        "     • '지금 정말 힘들구나' 말해주기",
                        "     • Day 4 자기자비 문구 3번 읽기",
                        "",
                        "3. '도움 요청 리스트' 작성:",
                        "   • 전화할 수 있는 사람 3명",
                        "   • 찾아갈 수 있는 공간 2곳",
                        "   • 위로받은 콘텐츠 (책, 영상, 노래)",
                        "",
                        "4. '작은 위안 목록' 작성:",
                        "   • 5분 안에 할 수 있는 것 (따뜻한 차, 산책, 음악)",
                        "   • 10분 안에 할 수 있는 것 (샤워, 요가, 일기)",
                        "   • 30분 안에 할 수 있는 것 (자연 속 걷기, 영화)",
                        "",
                        "5. 이 모든 것을 노트 한 페이지에 정리합니다",
                        "6. 사진을 찍어 언제든 볼 수 있게 저장합니다"
                    ],
                    "why_it_works": "위기 상황에서는 생각이 마비됩니다. 미리 준비하면 자동으로 대응할 수 있습니다.",
                    "psychology_background": """
**배경 심리학: 위기 개입 계획 (Crisis Intervention Planning)**

예방적 대처 (Proactive Coping):
- Aspinwall & Taylor (1997): 미리 계획하면 스트레스 반응이 감소합니다
- 위기 시 전전두엽 기능 저하 → 자동화된 계획이 필요
- "만약-그러면" 계획 (If-Then Planning)

자기자비 비상 키트:
- Gilbert (2009): 자기비판 시스템이 활성화되면:
  * 위협 시스템 (편도체) 활성화
  * 진정 시스템 (부교감신경) 억제
- 자기자비 개입 → 위협 시스템 진정

사회적 지지 계획:
- Cohen & Wills (1985): 사회적 지지는 스트레스 완충 효과
- 도움 요청은 강함의 표시, 약함이 아닙니다
- 연결은 생존 전략입니다

DBT 위기 생존 기술:
- Linehan (1993): Dialectical Behavior Therapy
- TIPP 기술: Temperature, Intense exercise, Paced breathing, Paired muscle relaxation
- 감각 활용: 5-4-3-2-1 기법 (5개 보기, 4개 만지기...)

연구 증거:
- Gollwitzer & Sheeran (2006): 실행 의도 (implementation intention)는 목표 달성률을 2배 증가
- Breines & Chen (2012): 자기자비는 실패 후 다시 시도할 동기를 높입니다
                    """
                },
                "expected_resistance": "'이렇게까지 해야 하나?', '난 괜찮을 거야' 같은 회피가 생길 수 있습니다.",
                "breakthrough_strategy": "위기가 올 때 준비하는 것이 아닙니다. 지금 준비해야 위기 때 쓸 수 있습니다. 이것은 자신을 돌보는 사랑입니다.",
                "evening_reflection": "내일 힘든 일이 생긴다면, 나는 어떻게 나를 돌볼 수 있을까요?",
                "micro_win": "비상 키트를 완성하고 사진을 저장했다면 → 성공! ✅"
            },
            
            # Day 25
            {
                "day": 25,
                "week": 4,
                "title": "🔄 일상에 통합하기",
                "morning_ritual": "자기자비는 특별한 날이 아닌, 매일의 습관입니다.",
                "core_practice": {
                    "name": "자기자비 루틴 디자인",
                    "duration": "20분",
                    "steps": [
                        "1. 지난 25일을 돌아봅니다:",
                        "   • 가장 도움이 된 실천 3가지는?",
                        "   • 계속하고 싶은 것은?",
                        "   • 부담스러웠던 것은?",
                        "",
                        "2. 나만의 '매일 루틴' 설계 (3단계):",
                        "",
                        "   🌅 아침 루틴 (5분):",
                        "   예: Day 5 자기자비 문구 읽기 + 손을 가슴에 얹기",
                        "",
                        "   🌞 낮 루틴 (수시로):",
                        "   예: 자기비판 알아차릴 때마다 '지금 힘들구나' 말해주기",
                        "",
                        "   🌙 저녁 루틴 (10분):",
                        "   예: Day 6 저녁 체크인 (오늘의 작은 승리 1개)",
                        "",
                        "3. '유지 전략' 작성:",
                        "   • 캘린더에 알림 설정하기",
                        "   • 루틴 트래커 만들기 (체크리스트)",
                        "   • 한 달에 한 번 '자기자비 점검의 날' 정하기",
                        "",
                        "4. '장애물 대비':",
                        "   • 바쁜 날: 최소 루틴 (1분 버전)",
                        "   • 놓쳤을 때: 자기비판 말고 '다시 시작' 선택",
                        "",
                        "5. 이 루틴을 종이에 적어 잘 보이는 곳에 붙입니다"
                    ],
                    "why_it_works": "습관은 동기보다 강합니다. 작고 명확한 루틴이 장기적 변화를 만듭니다.",
                    "psychology_background": """
**배경 심리학: 습관 형성 (Habit Formation)**

Lally et al. (2010) - 습관 형성 연구:
- 새 습관이 자동화되는 데 평균 66일
- 범위: 18일 ~ 254일 (개인차)
- 핵심: 일관성 > 완벽함

습관 루프 (Habit Loop):
- Duhigg (2012) - "습관의 힘":
  1. 신호 (Cue): 트리거
  2. 루틴 (Routine): 행동
  3. 보상 (Reward): 긍정적 결과
- 예: 아침 알람(신호) → 자기자비 문구(루틴) → 평화로움(보상)

실행 의도 (Implementation Intention):
- Gollwitzer (1999): "언제, 어디서, 무엇을" 구체화
- "아침에 일어나면 (언제), 침대에서 (어디서), 자기자비 문구를 읽겠다 (무엇을)"
- 모호한 목표 vs. 구체적 계획

Tiny Habits (BJ Fogg, 2020):
- 작게 시작하기: 2분 버전으로
- 기존 습관에 연결하기: "양치 후 → 자기자비 문구"
- 즉시 축하하기: "잘했어!" (보상 강화)

자기자비 습관의 신경과학:
- Davidson & McEwen (2012): 반복된 실천은 뇌 구조를 변화시킵니다
- 8주 마음챙김 → 편도체 밀도 감소, 전전두엽 두께 증가
- 습관은 새로운 신경 기본값(default)을 만듭니다

연구 증거:
- Clear (2018): 1% 개선의 복리 효과 → 1년 후 37배
- Neff & Germer (2013): MSC 8주 프로그램 후에도 지속 효과
                    """
                },
                "expected_resistance": "'또 실패하면 어쩌지?', '의욕이 떨어지면?' 같은 불안이 생길 수 있습니다.",
                "breakthrough_strategy": "실패는 없습니다. 놓치면 다시 시작하면 됩니다. 자기자비 루틴의 첫 번째 규칙: 완벽하지 않아도 괜찮다.",
                "evening_reflection": "내일부터 시작할 나만의 루틴이 기대되나요? 두려운가요? 둘 다여도 괜찮습니다.",
                "micro_win": "나만의 루틴을 디자인하고 종이에 적었다면 → 성공! ✅"
            },
            
            # Day 26
            {
                "day": 26,
                "week": 4,
                "title": "💌 미래의 나에게 편지 쓰기",
                "morning_ritual": "6개월 후 나는 더 자비로운 사람이 되어 있을 것입니다.",
                "core_practice": {
                    "name": "미래 편지 작성",
                    "duration": "30분",
                    "steps": [
                        "1. 편지 수신인 설정: '6개월 후의 나에게'",
                        "",
                        "2. 편지 내용 (4단계 구조):",
                        "",
                        "   📍 1부: 지금의 나",
                        "   • 28일 여정을 시작하기 전 나는 어땠나요?",
                        "   • 무엇이 가장 힘들었나요?",
                        "   • 어떤 변화를 원했나요?",
                        "",
                        "   📍 2부: 여정에서 배운 것",
                        "   • 28일 동안 발견한 가장 중요한 깨달음 3가지",
                        "   • 나를 가장 많이 도운 실천은?",
                        "   • 가장 힘들었지만 해냈던 순간은?",
                        "",
                        "   📍 3부: 미래에 당부하고 싶은 것",
                        "   • 6개월 후, 다시 힘들어질 때 기억해야 할 것",
                        "   • 절대 잊지 말아야 할 한 문장",
                        "   • 계속 실천했으면 하는 습관",
                        "",
                        "   📍 4부: 응원과 약속",
                        "   • 미래의 나에게 따뜻한 응원 메시지",
                        "   • '6개월 후 재검사'를 약속하며 마무리",
                        "",
                        "3. 편지를 봉투에 넣고 '6개월 후 열기'라고 적습니다",
                        "4. 캘린더에 6개월 후 알림을 설정합니다"
                    ],
                    "why_it_works": "미래 자기와의 대화는 현재의 성장을 굳히고, 장기적 관점을 만듭니다.",
                    "psychology_background": """
**배경 심리학: 시간적 자기 연속성 (Temporal Self-Continuity)**

Parfit (1984) & Hershfield (2011):
- 미래 자기와의 연결감이 클수록:
  * 장기적 결정이 개선됩니다
  * 자기 파괴적 행동이 줄어듭니다
  * 목표 지속성이 높아집니다

편지 쓰기 치료 (Letter Writing Therapy):
- Pennebaker (1997): 표현적 글쓰기 (Expressive Writing)
- 15-20분 동안 깊은 감정 쓰기 → 면역 기능 개선, 우울 감소
- 미래 자기 편지 → 자기 연속성 강화

자기 성찰과 성장:
- Wilson & Gilbert (2008): "미래 예측 편향" (Affective Forecasting)
- 현재의 깨달음을 미래에 상기 → 지혜 전달
- 편지는 "타임캡슐 자기자비"

약속의 심리학:
- Cialdini (2006) - 일관성 원칙:
- 공개적 약속(편지)은 실천 가능성을 높입니다
- "6개월 후 재검사"를 적으면 → 실제로 할 확률 증가

연구 증거:
- Hershfield et al. (2011): 미래 자기를 시각화하면 저축률이 2배 증가
- Blouin-Hudon & Pychyl (2016): 미래 자기와의 대화는 미루기 행동을 감소
                    """
                },
                "expected_resistance": "'이게 무슨 소용이야?', '6개월 후엔 다 까먹을 텐데' 같은 회의가 생길 수 있습니다.",
                "breakthrough_strategy": "지금 이 순간의 깨달음을 기록하지 않으면, 정말로 까먹습니다. 이 편지는 미래의 나를 위한 선물입니다.",
                "evening_reflection": "편지를 쓰면서 어떤 감정이 들었나요? 뿌듯함? 슬픔? 기대? 모두 소중한 감정입니다.",
                "micro_win": "미래의 나에게 편지를 완성했다면 → 성공! ✅"
            },
            
            # Day 27
            {
                "day": 27,
                "week": 4,
                "title": "🎨 나만의 자기자비 선언문",
                "morning_ritual": "나는 나만의 방식으로 자기자비를 실천합니다.",
                "core_practice": {
                    "name": "개인 맞춤형 자기자비 선언문 작성",
                    "duration": "30분",
                    "steps": [
                        "1. 28일 여정 총정리:",
                        "   • 노트를 처음부터 다시 읽어봅니다",
                        "   • 마음에 남는 문장에 형광펜 표시",
                        "   • 가장 도움이 된 실천 5개 체크",
                        "",
                        "2. '나만의 자기자비 정의' 작성:",
                        "   • 나에게 자기자비란 무엇인가요?",
                        "   • 한 문장으로 정의해보세요",
                        "   예: '자기자비는 나를 친구처럼 대하는 것이다'",
                        "",
                        "3. '나의 자기자비 원칙' 5가지:",
                        "   Day 1-27에서 배운 것 중 평생 기억하고 싶은 원칙",
                        "   예:",
                        "   1. 자기비판을 알아차리는 순간, 멈추고 숨 쉬기",
                        "   2. 완벽하지 않아도 충분하다고 믿기",
                        "   3. 힘들 때 도움 요청하기",
                        "   4. 나의 고통이 인간의 보편적 경험임을 기억하기",
                        "   5. 존재 자체로 가치 있음을 잊지 않기",
                        "",
                        "4. '나만의 자기자비 맨트라' (짧은 문구):",
                        "   위기의 순간에 떠올릴 한 문장",
                        "   예: '이 순간, 나는 내 편이다'",
                        "",
                        "5. '선언문' 형식으로 정리:",
                        "   • A4 한 장에 예쁘게 작성 (손글씨 권장)",
                        "   • 상단: 나의 자기자비 정의",
                        "   • 중단: 5가지 원칙",
                        "   • 하단: 나만의 맨트라",
                        "   • 서명과 날짜 기입",
                        "",
                        "6. 사진을 찍고, 원본은 잘 보이는 곳에 보관합니다"
                    ],
                    "why_it_works": "배운 것을 나만의 언어로 재구성하면 내면화됩니다. 선언은 정체성이 됩니다.",
                    "psychology_background": """
**배경 심리학: 자기 저작 효과 (Self-Authoring Effect)**

의미 만들기 (Meaning-Making):
- Park (2010): 경험을 자기 언어로 재구성 → 통합과 성장
- 단순히 배우기 vs. 나만의 방식으로 재창조하기
- 선언문 = 자기 이야기(Self-Narrative) 재작성

정체성 기반 습관:
- James Clear (2018): "나는 ~한 사람이다" 정체성
- 목표 기반: "나는 운동해야 해" (외적 동기)
- 정체성 기반: "나는 건강한 사람이다" (내적 동기)
- "나는 자기자비를 실천하는 사람이다" → 행동 변화

자기 결정 선언:
- Sheldon & Elliot (1999): 자율적으로 선택한 목표는 지속성 ↑
- 타인이 준 원칙 vs. 내가 만든 원칙
- 자기 저작 = 자율성 = 동기 강화

서명의 심리학:
- Ariely & Norton (2008): 서명은 심리적 소유권을 만듭니다
- 내가 서명한 선언문 = 내 것
- 계약 효과: 나 자신과의 약속

통합적 학습 (Integrative Learning):
- Kolb (1984) - 경험 학습 사이클:
  1. 구체적 경험 (28일 실천)
  2. 성찰적 관찰 (돌아보기)
  3. 추상적 개념화 (원칙 만들기) ← 오늘!
  4. 적극적 실험 (앞으로 실천)

연구 증거:
- Wilson (2011): 자기 서사 편집(self-story editing)은 행동을 장기적으로 변화시킵니다
- Pennebaker & Seagal (1999): 의미 있는 글쓰기는 면역 체계, 심리 건강 개선
                    """
                },
                "expected_resistance": "'너무 거창한 거 아니야?', '이런 거 안 맞는데' 같은 저항이 올 수 있습니다.",
                "breakthrough_strategy": "형식은 중요하지 않습니다. 나만의 방식으로 자유롭게 쓰세요. 완벽한 선언문은 없습니다. 당신만의 것이 최고입니다.",
                "evening_reflection": "완성된 선언문을 읽어보세요. 28일 전의 나라면 어떻게 느꼈을까요?",
                "micro_win": "나만의 자기자비 선언문을 완성하고 서명했다면 → 성공! ✅"
            },
            
            # Day 28
            {
                "day": 28,
                "week": 4,
                "title": "🏆 4주 여정 완료 & 재검사 초대",
                "celebration": """
🎊🎊🎊 28일 완주! 축하합니다! 🎊🎊🎊

당신은 정말로 해냈습니다.

28일 전, 당신은 용기를 내어 첫 걸음을 떼었습니다.
그리고 지금, 여기까지 왔습니다.

이 여정에서 당신은:
✅ 자기비판을 알아차렸습니다
✅ 완벽주의를 내려놓기 시작했습니다
✅ 혼자가 아님을 깨달았습니다
✅ 존재 자체로 가치 있음을 배웠습니다
✅ 나만의 자기자비 방법을 찾았습니다

변화는 이미 시작되었습니다.
작지만 확실한 변화들.
스스로에게 더 부드러워진 순간들.
다시 일어선 용기.

━━━━━━━━━━━━━━━━━━━━━━━━━━

🔍 이제 재검사를 통해 변화를 확인하세요

28일 전과 비교해서 무엇이 달라졌는지 확인해보세요.
숫자의 변화뿐 아니라, 당신 안의 변화를 느껴보세요.

🔗 재검사 링크: {RETEST_LINK}

━━━━━━━━━━━━━━━━━━━━━━━━━━

💌 마지막 메시지

자기자비는 도착지가 아닌 여정입니다.
완벽하지 않아도 괜찮습니다.
때로 놓치고, 실패하고, 다시 시작해도 괜찮습니다.

중요한 건 방향입니다.
당신은 이미 올바른 방향으로 가고 있습니다.

6개월 후, 1년 후, 당신은 더욱 성장해 있을 것입니다.
그때도 이 여정을 기억하며,
다시 한번 나에게 자비를 베푸세요.

당신은 충분히 가치 있습니다.
그 자체로.

━━━━━━━━━━━━━━━━━━━━━━━━━━

🌟 다음 단계

1. 재검사 완료하기
2. Day 25에서 만든 '매일 루틴' 지속하기
3. Day 26 미래 편지 6개월 후 열어보기
4. Day 27 선언문 매일 보기
5. 필요할 때마다 28일 가이드 다시 읽기

━━━━━━━━━━━━━━━━━━━━━━━━━━

당신을 응원합니다. 항상.

- 자기자비 여정 팀 일동 💚
                """,
                "morning_ritual": "나는 28일 여정을 완주했습니다. 나 자신이 자랑스럽습니다.",
                "core_practice": {
                    "name": "여정 총정리 & 재검사",
                    "duration": "20분 + 재검사 시간",
                    "steps": [
                        "1. 28일 노트를 처음부터 끝까지 훑어봅니다 (10분)",
                        "",
                        "2. '가장 의미 있었던 순간 Top 3' 선정:",
                        "   • 1위: ______________________",
                        "   • 2위: ______________________",
                        "   • 3위: ______________________",
                        "",
                        "3. '28일 전 vs. 지금' 비교:",
                        "   • 자기 대화 방식이 어떻게 달라졌나요?",
                        "   • 실패/실수에 대한 반응이 어떻게 변했나요?",
                        "   • 가장 큰 변화는 무엇인가요?",
                        "",
                        "4. 재검사 진행:",
                        "   • 위의 재검사 링크 클릭",
                        "   • 솔직하게 현재 상태 응답",
                        "   • 결과 비교 확인",
                        "",
                        "5. 축하하기:",
                        "   • 나에게 보상 주기 (좋아하는 것 하기)",
                        "   • 누군가에게 완주 사실 나누기",
                        "   • 스스로에게 '고생했어, 잘했어' 말하기"
                    ],
                    "why_it_works": "돌아보기는 배움을 굳힙니다. 재검사는 변화를 객관적으로 확인하게 합니다.",
                    "psychology_background": """
**배경 심리학: 성찰과 통합 (Reflection and Integration)**

메타인지적 성찰:
- Schön (1983): Reflection-on-action (행동 후 성찰)
- 경험 → 성찰 → 학습 → 변화
- "내가 무엇을 배웠는가?"를 묻는 것이 학습을 완성합니다

사전-사후 비교:
- Prochaska & DiClemente (1983): 변화 단계 모델
- 재검사는 변화를 '가시화'합니다
- 숫자 변화 + 주관적 변화 = 동기 강화

자기 효능감 (Self-Efficacy):
- Bandura (1997): 과거 성공 경험이 미래 시도를 예측
- "나는 28일을 해냈다" → "나는 할 수 있다"
- 완수 경험 = 자기 효능감 증가

축하의 중요성:
- Fredrickson (2001): 긍정 정서 확장-구축 이론
- 기쁨, 자부심 → 사고 확장, 자원 구축
- 스스로 축하하기 = 자기자비의 실천

연구 증거:
- Neff & Germer (2013): MSC 프로그램 후 자기자비 43% 증가, 우울 31% 감소
- 효과는 6개월, 1년 후에도 유지
- Smeets et al. (2014): 3주 자기자비 훈련 → 자기비판 감소, 자기 재확신 증가
                    """
                },
                "expected_resistance": "'재검사가 두려워', '변화가 없으면 어쩌지?' 같은 불안이 생길 수 있습니다.",
                "breakthrough_strategy": "숫자가 전부가 아닙니다. 28일을 완주한 것 자체가 이미 큰 변화입니다. 재검사는 평가가 아닌 확인입니다.",
                "evening_reflection": "28일 여정, 정말 고생 많았습니다. 당신은 해냈습니다. 스스로를 꼭 안아주세요.",
                "micro_win": "28일 여정을 완주했다면 → 대성공! 🎉✅🏆",
                "retest_link": "{RETEST_LINK}"  # 실제 재검사 링크로 대체 필요
            }
        ]


# ==========================================
# 사용 예시
# ==========================================

if __name__ == "__main__":
    # 테스트 데이터
    sample_results = {
        "scores": {"rosenberg": 22},
        "profile_type": "developing_critic",
        "detected_patterns": [
            {"type": "SELF_CRITICISM", "strength": 0.85},
            {"type": "PERFECTIONISM", "strength": 0.78},
            {"type": "SOCIAL_COMPARISON", "strength": 0.65}
        ],
        "hidden_strengths": [
            {"name": "회복탄력성", "description": "어려움 속에서도 다시 일어서는 힘"}
        ]
    }
    
    guide = DailyPracticeGuide("testuser", sample_results)
    all_days = guide.generate_all_days()
    
    print(f"📅 총 {len(all_days)}일 가이드 생성 완료!\n")
    
    # Day 1 미리보기
    day1 = all_days[0]
    print("="*60)
    print(f"Day {day1['day']}: {day1['title']}")
    print("="*60)
    print(f"\n🌅 Morning Ritual:")
    print(f"   {day1['morning_ritual']}\n")
    print(f"📖 Core Practice: {day1['core_practice']['name']}")
    print(f"⏱️  Duration: {day1['core_practice']['duration']}\n")
    print(f"🧠 Why it works:")
    print(f"   {day1['core_practice']['why_it_works']}\n")
    print(f"⚠️  Expected Resistance:")
    print(f"   {day1['expected_resistance']}\n")
    print(f"💡 Breakthrough Strategy:")
    print(f"   {day1['breakthrough_strategy']}\n")
    print(f"✅ Micro Win:")
    print(f"   {day1['micro_win']}\n")
    
    # 배경 심리학 일부 출력
    print("🧠 Psychology Background (첫 200자):")
    print(f"   {day1['core_practice']['psychology_background'][:200]}...\n")
